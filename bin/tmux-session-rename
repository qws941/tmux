#!/usr/bin/env bash
# tmux-session-rename — rename session from fzf picker
# Usage: tmux-session-rename "● session_name"

item="$1"
[[ "$item" == "● "* ]] || exit 0

sess="${item#● }"
printf '\033[1;35mRename "%s" to: \033[0m' "$sess"
read -r new < /dev/tty
if [[ -n "$new" ]]; then
  tmux rename-session -t "$sess" "$new" 2>/dev/null \
    && printf '\033[1;32m✓ Renamed → %s\033[0m\n' "$new" \
    || printf '\033[1;31m✗ Failed\033[0m\n'
  sleep 0.3
fi
