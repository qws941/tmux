# ~/.tmux/conf.d/30-statusbar.conf - Status bar (split from theme)
set -g status 2
set -g status-position bottom
set -g status-style 'bg=#1a1b26 fg=#a9b1d6'

# Line 1: Clickable session tabs — opencode pinned first with ⌂ icon
# Two-pass #{S:} trick: pass1=opencode only, separator, pass2=everything else
# Zero shell forks — pure tmux format, instant rendering
set -g status-format[1] '#[align=left,bg=#16161e]#{S:#{?#{==:#{session_name},opencode},#[range=session|#{session_id}]#{?#{==:#{session_name},#{client_session}},#[fg=#1a1b26 bg=#7aa2f7 bold] ⌂ opencode ,#[fg=#7aa2f7 bg=#24283b] ⌂ opencode }#[norange bg=#16161e nobold],}}#[fg=#3b4261]│#{S:#{?#{==:#{session_name},opencode},,#[range=session|#{session_id}]#{?#{==:#{session_name},#{client_session}},#[fg=#1a1b26 bg=#3d59a1 bold] #{session_name} ,#[fg=#a9b1d6 bg=#1a1b26] #{session_name} }#[norange bg=#16161e nobold]}}'

# Window Tabs (static — not affected by responsive tiers)
setw -g window-status-separator '#[fg=#1a1b26]|'

# ── Defaults (Normal tier — overridden by tmux-responsive on resize) ──
set -g status-left-length 30
set -g status-right-length 80
set -g status-left '#[fg=#3d59a1,bold] #S #[fg=#3b4261]| '
set -g status-right '#[fg=#73daca]#(~/.tmux/bin/tmux-git-status) #[fg=#3b4261]#{?client_prefix,#[fg=#9d7cd8]P ,}#{?pane_input_off,#[fg=#f7768e]*,} #[fg=#3b4261]| #[fg=#7dcfff]#(~/.tmux/bin/tmux-sys-stats) #[fg=#3b4261]| #[fg=#a9b1d6]%H:%M '
setw -g window-status-format '#[fg=#3b4261] #I '
setw -g window-status-current-format '#[fg=#3d59a1,bold]>#I '

# ── Responsive statusbar (hook-based, no jitter) ──
# Runs only on actual resize events, not every status-interval
# Use -g (set, not append) to prevent hook accumulation on reload
set-hook -g client-resized 'run-shell -b "~/.tmux/bin/tmux-responsive"'
run-shell -b "~/.tmux/bin/tmux-responsive"
