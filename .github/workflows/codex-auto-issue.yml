# Codex Auto-Issue: trigger Codex on issues with 'codex' label
# SSoT: qws941/.github — synced to all repos
# Synced via: .github/sync.yml → Group 3

name: Codex Auto-Issue

on:
  issues:
    types: [labeled]

permissions:
  issues: write

concurrency:
  group: codex-issue-${{ github.event.issue.number }}
  cancel-in-progress: false

jobs:
  codex-trigger:
    if: github.event.label.name == 'codex'
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Trigger Codex on issue
        uses: actions/github-script@ed597411d8f924073f98dfc5c65a23a2325f34cd # v8
        with:
          script: |
            const issue = context.payload.issue;
            const body = [
              `@codex ${issue.title}`,
              '',
              issue.body || ''
            ].join('\n').trim();

            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issue.number,
              body: body
            });
